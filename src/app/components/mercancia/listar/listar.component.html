<h2>Buscar Mercanc√≠a</h2>

<form (ngSubmit)="buscar()" class="form">
  <input type="text" placeholder="Nombre" [(ngModel)]="filtros.nombre" name="nombre">
  <input type="text" placeholder="Digite el nombre" [(ngModel)]="filtros.nombreUsuario" name="idUsuario">
  <input type="date" [(ngModel)]="filtros.fechaIngreso" name="fechaIngreso">
  <button type="submit" class="btn btn-secondary" style="margin-left: 10px;">Buscar</button>
  <button type="button" (click)="consultarTodo()" class="btn btn-secondary" style="margin-left: 10px;">
    Ver toda la mercanc√≠a
  </button>
</form>

<table *ngIf="mercancias.length > 0" class="table table-striped table-bordered table-hover mt-4">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Cantidad</th>
      <th>Fecha Ingreso</th>
      <th>Usuario</th>
      <th>Usuario Modific√≥</th>
      <th>Fecha Modificaci√≥n</th>
      <th colspan="2" class="text-center">Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of mercancias">
      <td>{{ item.id }}</td>
      <td>{{ item.nombreProducto }}</td>
      <td>{{ item.cantidad }}</td>
      <td>{{ item.fechaIngreso }}</td>
      <td>{{ item.usuarioRegistro?.nombre || 'Desconocido' }}</td>
      <td>{{ item.usuarioModifico?.nombre || 'N/A' }}</td>
      <td>{{ item.fechaModificacion || 'N/A' }}</td>
      <td class="text-center">
        <button (click)="editar(item.id!)" class="btn btn-sm btn-warning" title="Editar">‚úèÔ∏è</button>
      </td>
      <td class="text-center">
        <button [routerLink]="['/mercancia/eliminar', item.id, item.idUsuario]" class="btn btn-sm btn-danger"
          title="Eliminar">
          üóëÔ∏è
        </button>

      </td>
    </tr>
  </tbody>
</table>

<div *ngIf="mensaje" class="alert alert-danger alert-dismissible fade show" style="margin-top: 15px;">
  {{ mensaje }}
</div>
<p *ngIf="mercancias.length === 0">No se encontraron resultados.</p>

<div *ngIf="mensajeError" class="alert alert-danger alert-dismissible fade show" role="alert">
  <strong>Error:</strong> {{ mensajeError }}
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

<div *ngIf="mensajeAprobado" class="alert alert-success alert-dismissible fade show" role="alert">
  <strong>√âxito:</strong> {{ mensajeAprobado }}
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
